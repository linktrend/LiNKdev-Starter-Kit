# Web App Structure & Design System Rules

## Purpose & Scope

This document defines the canonical structure and design system rules for the web application. Mobile applications are managed separately and have their own structure documentation.

## Design System Rule

**All new pages/screens/components MUST consume tokens from `/design/DESIGN_TOKENS.json` via `@starter/config/tailwind-preset`, and primitives from `@starter/ui`. No raw hex colors or ad-hoc typography in app code.**

- Landing/marketing pages can have custom sections but must inherit palette/typography from the design system
- Use Tailwind classes that map to design tokens (e.g., `bg-primary`, `text-foreground`)
- Import components from `@starter/ui` instead of re-implementing primitives
- Follow the established color palette, typography scale, and spacing system

## Monorepo Reuse Rule

**Share components in `packages/ui` when feasible; avoid re-implementing primitives in app code.**

- Common UI components should be defined in `packages/ui`
- App-specific components can extend or compose base primitives
- Maintain consistency across the entire application through shared primitives

## User Experience Flow

```mermaid
flowchart TD

%% User App
A[Landing Page (Marketing + Sign Up/Login)] -->|Sign Up| B[Onboarding]
A -->|Login| C[Homepage (Dashboard / Feed / Log)]
B --> C

C --> D[Feature Modules (App-Specific)]
C --> E[Profile]
C --> F[Account / Organization]
C --> G[Settings]
C --> H[Billing & Subscriptions]
C --> I[Notifications]
C --> J[Help / Support / Docs]
C --> K[Admin]

%% Developer Console
X[Developer Console Login Page] --> Y[Developer Console Home]
Y --> Y1[System Health & Logs]
Y --> Y2[Database / Records Viewer]
Y --> Y3[Jobs / Background Tasks]
Y --> Y4[Feature Flags & Config]
Y --> Y5[Environment Management]
Y --> Y6[Integrations & Webhooks]
Y --> Y7[Automations (n8n, others)]
Y --> Y8[API Monitoring]
Y --> Y9[Error Tracking & Alerts]
Y --> Y10[Analytics / Usage Metrics]
Y --> Y11[Audit & Security Logs]
Y --> Y12[Security & Access Control]
```

## Developer Console Separation Rule

**The Developer Console is a separate shell with its own login system and interface.**

- Developer Console has its own authentication flow
- Separate from the main user application
- Provides system administration and monitoring capabilities
- Accessible only to authorized developers/administrators
- Maintains its own navigation and layout structure

## Implementation Guidelines

1. **Routing**: Follow Next.js App Router conventions with proper route groups
2. **Components**: Use `@starter/ui` primitives as the foundation
3. **Styling**: Apply design tokens through Tailwind classes
4. **Consistency**: Maintain visual and interaction patterns across all pages
5. **Accessibility**: Follow semantic HTML and ARIA guidelines
6. **Performance**: Optimize for mobile-first responsive design